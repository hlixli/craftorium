<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <title>Публічна мобільна версія</title>
  <meta name="color-scheme" content="light dark">
  <meta name="theme-color" content="#003399">

  <!-- Критичні зображення (PNG) -->
  <link rel="preload" as="image" href="assets/img/dynastia.png">
  <link rel="preload" as="image" href="assets/img/btn-dynastia.png">
  <link rel="preload" as="image" href="assets/img/btn-svitoglyad.png">
  <link rel="preload" as="image" href="assets/img/btn-craftorium.png">

  <style>
    /* ====== ТЕМА (UA palette + скло). ФОН ЛИШАЄТЬСЯ, ЯК БУВ ====== */
    :root{
      --bg:#FFFDF9; --bg-soft:#FDF6E0; --paper:#FFFAE6;
      --glass:#FFFFFF80; --glass-cold:#E6F0FF; --glass-plain:#F9F9F9;

      --ua-blue:#003399; --ua-blue-strong:#0046CC; --ua-blue-deep:#0D47A1; --ua-blue-hover:#002B80;
      --ua-yellow:#F8E17C; --ua-yellow-2:#FFD966;

      --sky:#CCE6FF; --pastel:#FFF5CC;

      --fg:#1A1A1A; --muted:#667085; --line:#e7e3d9;

      --radius:16px; --radius-lg:22px;
      --shadow: 0 10px 30px rgba(0,0,0,.10), 0 1px 0 rgba(0,0,0,.06);

      /* Максимальна ширина мобільної версії */
      --maxw: 375px;

      /* Розміри елементів */
      --gap: 12px;
      --touch: 56px;
      --summary-fs: 16px;
      --label-fs: 14px;

      /* Висота картки розраховується JS з фото "Династія" */
      --card-h: 320px; /* фолбек, поки не порахували */
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0b0f17; --bg-soft:#0e1420; --paper:#0f1726;
        --fg:#f1f5ff; --muted:#9db0d1; --line:#162033; --shadow:none;
        --glass:#0f172680; --glass-cold:#0f1f3480; --glass-plain:#0f1726cc;
      }
    }

    /* ====== БАЗА (mobile-first) ====== */
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      line-height:1.6; color:var(--fg);
      background:
        radial-gradient(160vw 90vh at 15% -10%, var(--sky) 0%, transparent 65%),
        radial-gradient(140vw 80vh at 85% -10%, var(--pastel) 0%, transparent 60%),
        linear-gradient(180deg, var(--bg) 0%, var(--paper) 100%);
      background-repeat:no-repeat;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      -webkit-tap-highlight-color:transparent;
    }
    a{ color:inherit; text-decoration:none }
    img{ display:block; max-width:100%; height:auto }

    .wrap{
      max-width: var(--maxw);
      margin-inline: auto;
      padding: max(12px, env(safe-area-inset-top)) 14px 16px;
    }
    .muted{ color:var(--muted) }

    /* ====== ШАПКА (скло, без написів) ====== */
    header{
      position:sticky; top:0; z-index:50;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding: max(10px, env(safe-area-inset-top)) 10px;
      margin: 0 -10px 10px;
      background: linear-gradient(180deg, var(--glass) 0%, transparent 100%);
      backdrop-filter: blur(10px) saturate(140%);
      border-bottom:1px solid var(--line);
      min-height: 50px;
    }
    .brand{ display:flex; align-items:center; gap:10px }
    .brand__mark{
      inline-size:32px; block-size:32px; border-radius:12px; flex:0 0 auto;
      background:linear-gradient(135deg, var(--ua-blue) 0%, var(--ua-blue-strong) 55%, var(--ua-blue-hover) 100%);
      position:relative; overflow:hidden; box-shadow: 0 6px 18px rgba(0,51,153,.25);
    }
    .brand__mark:after{
      content:""; position:absolute; inset:-30% -20% auto auto; width:120%; height:120%; transform:rotate(18deg);
      background: radial-gradient(50% 40% at 70% 10%, var(--ua-yellow) 0%, transparent 60%); opacity:.65; mix-blend-mode:screen;
    }
    .brand > *:not(.brand__mark), header > .muted{ display:none !important }

    /* ====== КАРТКИ ГАЛЕРЕЇ (одноколонка, спільний розмір) ====== */
    .gallery{ margin: 12px 0 6px }
    .cards{ display:grid; grid-template-columns: 1fr; gap: var(--gap) }

    .card{
      position:relative; border:1px solid var(--line); border-radius:var(--radius-lg);
      overflow:hidden; background: var(--glass-plain); box-shadow: var(--shadow);
      backdrop-filter: blur(14px) saturate(140%);
      transition: transform .18s ease, box-shadow .18s ease;
      will-change: transform; isolation:isolate;
    }
    @media (hover:hover){
      .card:hover{ transform: translateY(-2px); box-shadow: 0 14px 40px rgba(0,0,0,.14) }
    }
    .card:focus-visible{ outline:3px solid var(--ua-blue-strong); outline-offset:3px }

    /* ЄДИНИЙ розмір прямокутника під фото — на основі висоти фото "Династія" */
    .media{
      width:100%;
      height: var(--card-h);
      object-fit: contain;           /* без обрізки, щоб “відповідало фото” */
      object-position: center;
      background: linear-gradient(180deg, var(--bg-soft), var(--paper));
    }
    .frame{ position:absolute; inset:10px; border:1px solid rgba(0,0,0,.12); border-radius:calc(var(--radius-lg) - 8px); pointer-events:none; mix-blend-mode:multiply }
    @media (prefers-color-scheme: dark){
      .frame{ border-color: rgba(255,255,255,.18) } .card{ background:var(--glass) }
    }
    .label{
      position:absolute; left:12px; right:12px; bottom:12px;
      background: linear-gradient(180deg, var(--glass), var(--glass-cold));
      color: var(--ua-blue-deep);
      border:1px solid var(--line); border-radius:12px; padding:8px 12px;
      font-weight:800; font-size:var(--label-fs);
      backdrop-filter: blur(10px) saturate(140%); box-shadow: 0 6px 20px rgba(0,0,0,.10);
    }

    /* ====== АКОРДЕОНИ (іконка = PNG кнопки) ====== */
    .accordion{ margin: 10px 0 6px }
    details{
      border:1px solid var(--line); border-radius:18px; background: linear-gradient(180deg, var(--glass), var(--glass-cold));
      backdrop-filter: blur(10px) saturate(140%); box-shadow: var(--shadow);
      overflow:hidden; transition: box-shadow .2s ease, border-color .2s ease; margin-bottom:12px;
      scroll-margin-top: 76px;
      content-visibility: auto; contain-intrinsic-size: 0 120px;
    }
    details[open]{ box-shadow: 0 14px 36px rgba(0,0,0,.14); border-color:#d7c25a }
    summary{
      list-style:none; cursor:pointer; display:flex; align-items:center; justify-content:space-between; gap:12px;
      min-height: var(--touch); padding: 14px 14px; font-weight:800; letter-spacing:.2px; color:var(--ua-blue-deep);
      font-size: var(--summary-fs);
    }
    summary::-webkit-details-marker{ display:none }

    .summary-left{ display:flex; align-items:center; gap:10px }
    .summary-icon{
      inline-size:40px; block-size:40px; border-radius:12px; display:grid; place-items:center; flex:0 0 auto;
      background: linear-gradient(180deg, var(--ua-yellow), var(--ua-yellow-2)); border:1px solid #e8cc58;
      box-shadow: 0 8px 22px rgba(255,217,102,.30);
    }
    .summary-icon__img{
      inline-size:24px; block-size:24px; object-fit:contain; border-radius:4px; user-select:none;
    }
    .chev{
      inline-size:22px; block-size:22px; flex:0 0 auto; transition: transform .25s ease;
      filter: drop-shadow(0 2px 6px rgba(0,0,0,.12));
    }
    details[open] .chev{ transform: rotate(180deg) }

    .panel{ padding: 0 14px 14px 14px; color:#1A1A1A }
    .panel p{ margin: 10px 0 }

    /* Кнопка "Перейти" — ТІЛЬКИ кнопка, БЕЗ іконок усередині */
    .actions{ display:none; margin-top:12px }
    details[open] .actions{ display:block }
    .btn{
      appearance:none; border:1px solid var(--ua-blue-strong); background: var(--ua-blue-strong);
      color:#fff; padding:14px 18px; border-radius:14px; font-weight:800; cursor:pointer;
      transition: transform .12s ease, background-color .2s ease, border-color .2s ease;
      text-align:center; display:block; width:100%; line-height:1; touch-action:manipulation;
    }
    @media (hover:hover){ .btn:hover{ transform: translateY(-1px) } }
    .btn:active{ transform: translateY(0) scale(.99) }
    .btn:focus-visible{ outline:3px solid #d7c25a; outline-offset:3px }

    /* ====== Декорації ====== */
    .blob{ position:absolute; filter: blur(44px); opacity:.55; pointer-events:none }
    .blob--blue{ width:420px; height:280px; right:-100px; top:-60px; background: radial-gradient(60% 60% at 60% 40%, var(--sky), transparent 65%) }
    .blob--yellow{ width:380px; height:260px; left:-90px; top:120px; background: radial-gradient(60% 60% at 40% 60%, var(--ua-yellow-2), transparent 65%) }

    /* ====== A11y ====== */
    .visually-hidden{ position:absolute!important; clip:rect(1px,1px,1px,1px); clip-path:inset(50%); height:1px;width:1px; overflow:hidden; white-space:nowrap; border:0; padding:0; margin:-1px }
    @media (prefers-reduced-motion: reduce){
      .card, .btn, details, summary, .chev{ transition:none !important }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="blob blob--blue" aria-hidden="true"></div>
    <div class="blob blob--yellow" aria-hidden="true"></div>

    <!-- Скляний хедер без текстів -->
    <header>
      <div class="brand" aria-label="Логотип">
        <div class="brand__mark" aria-hidden="true"></div>
      </div>
      <div class="muted" aria-hidden="true"></div>
    </header>

    <!-- ===== МОБІЛЬНА ГАЛЕРЕЯ (1 колонка, однакова висота карток) ===== -->
    <section class="gallery" aria-label="Три головні напрямки">
      <div class="cards">
        <!-- Династія -->
        <a class="card" href="#dyn" aria-label="Перейти: Династія Слободенюк">
          <img class="media" id="hero-dynastia" src="assets/img/dynastia.png" alt="Династія Слободенюк — прев'ю" loading="eager" decoding="async" fetchpriority="high" />
          <span class="frame" aria-hidden="true"></span>
          <span class="label">Династія Слободенюк</span>
        </a>

        <!-- Світогляд -->
        <a class="card" href="#svit" aria-label="Перейти: БО &quot;БФ Світогляд&quot;">
          <img class="media" src="assets/img/svitoglyad.png" alt="БО &quot;БФ Світогляд&quot; — прев'ю" loading="lazy" decoding="async" />
          <span class="frame" aria-hidden="true"></span>
          <span class="label">БО "БФ Світогляд"</span>
        </a>

        <!-- Крафторіум -->
        <a class="card" href="#craft" aria-label="Перейти: Крафторіум">
          <img class="media" src="assets/img/craftorium.png" alt="Крафторіум — прев'ю" loading="lazy" decoding="async" />
          <span class="frame" aria-hidden="true"></span>
          <span class="label">Крафторіум</span>
        </a>
      </div>
    </section>

    <!-- ===== АКОРДЕОНИ (іконки = PNG кнопок) ===== -->
    <section class="accordion" aria-label="Детальна інформація">
      <!-- Dynastia -->
      <details id="dyn">
        <summary>
          <span class="summary-left">
            <span class="summary-icon" aria-hidden="true">
              <img class="summary-icon__img" src="assets/img/btn-dynastia.png" alt="">
            </span>
            Династія Слободенюк
          </span>
          <svg class="chev" viewBox="0 0 24 24" aria-hidden="true"><path d="M7 10l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2"/></svg>
        </summary>
        <div class="panel">
          <p><strong>Опис:</strong> коротко про напрям, діяльність та місію. Тут з’явиться розширений текст, фото й посилання.</p>
          <div class="actions">
            <a class="btn" href="#" role="button" aria-label="Перейти до розділу «Династія Слободенюк»">Перейти</a>
          </div>
        </div>
      </details>

      <!-- Svitoglyad -->
      <details id="svit">
        <summary>
          <span class="summary-left">
            <span class="summary-icon" aria-hidden="true">
              <img class="summary-icon__img" src="assets/img/btn-svitoglyad.png" alt="">
            </span>
            БО "БФ Світогляд"
          </span>
          <svg class="chev" viewBox="0 0 24 24" aria-hidden="true"><path d="M7 10l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2"/></svg>
        </summary>
        <div class="panel">
          <p><strong>Благодійний фонд:</strong> коротко про напрямки допомоги, географію, звітність та реквізити.</p>
          <div class="actions">
            <a class="btn" href="#" role="button" aria-label="Перейти до розділу «Світогляд»">Перейти</a>
          </div>
        </div>
      </details>

      <!-- Craftorium -->
      <details id="craft">
        <summary>
          <span class="summary-left">
            <span class="summary-icon" aria-hidden="true">
              <img class="summary-icon__img" src="assets/img/btn-craftorium.png" alt="">
            </span>
            Крафторіум
          </span>
          <svg class="chev" viewBox="0 0 24 24" aria-hidden="true"><path d="M7 10l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2"/></svg>
        </summary>
        <div class="panel">
          <p><strong>Творча майстерня:</strong> вироби, формати навчання, воркшопи, колаборації. Додамо галерею та CTA пізніше.</p>
          <div class="actions">
            <a class="btn" href="#" role="button" aria-label="Перейти до розділу «Крафторіум»">Перейти</a>
          </div>
        </div>
      </details>
    </section>

    <footer class="muted" style="border-top:1px solid var(--line); padding-top:10px; margin-top:6px">
      Мобільна версія: max-width 375px, однакова висота карток за висотою «Династії», PNG-іконки у заголовках, фон збережено.
    </footer>
  </div>

  <script>
    // 1) Відкривати потрібний акордеон, якщо прийшли з якорем
    (function(){
      if(location.hash){
        const el = document.querySelector(location.hash);
        if(el && el.tagName.toLowerCase()==='details'){
          el.setAttribute('open','');
          el.scrollIntoView({behavior:'smooth', block:'start'});
        }
      }
    })();

    // 2) A11y: aria-expanded + тільки один відкритий акордеон
    (function(){
      const items = document.querySelectorAll('.accordion details');
      items.forEach(dtl => {
        const sum = dtl.querySelector('summary');
        if(sum){
          sum.setAttribute('role','button');
          sum.setAttribute('aria-expanded', dtl.hasAttribute('open') ? 'true' : 'false');
          dtl.addEventListener('toggle', () => {
            sum.setAttribute('aria-expanded', dtl.open ? 'true' : 'false');
            if(dtl.open){ items.forEach(o => { if(o!==dtl) o.removeAttribute('open'); }); }
          });
        }
      });
    })();

    // 3) ЄДИНА ВИСОТА КАРТОК = висота зображення "Династія" при поточній ширині
    (function(){
      const dyn = document.getElementById('hero-dynastia');
      const setHeight = () => {
        try{
          const containerWidth = dyn.closest('.card').clientWidth || dyn.clientWidth || 0;
          const naturalW = dyn.naturalWidth || 0;
          const naturalH = dyn.naturalHeight || 0;

          // якщо дані є — рахуємо висоту за аспектом "Династії"
          if(containerWidth && naturalW && naturalH){
            const h = Math.round(containerWidth * (naturalH / naturalW));
            document.documentElement.style.setProperty('--card-h', h + 'px');
          }else{
            // фолбек на випадок, якщо ще не завантажилось
            document.documentElement.style.setProperty('--card-h', '320px');
          }
        }catch(e){
          document.documentElement.style.setProperty('--card-h', '320px');
        }
      };

      if(dyn){
        if(dyn.complete) setHeight();
        else dyn.addEventListener('load', setHeight, { once:true });

        // Перерахунок при зміні розміру/орієнтації
        let t;
        const onResize = () => { clearTimeout(t); t = setTimeout(setHeight, 120); };
        window.addEventListener('resize', onResize);
        window.addEventListener('orientationchange', onResize);
      }
    })();
  </script>
</body>
</html>
